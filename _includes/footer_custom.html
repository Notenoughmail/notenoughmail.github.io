<!--An absolutely terrible way to do this, but it works-->
<script>
    const calloutTypes = [
        {% for c in site.callouts %}
        "{{ c[0] }}",
        {% endfor %}
    ];
    calloutTypes.forEach(type => {
        var elements = document.getElementsByClassName(type);
        for (let i = 0 ; i < elements.length ; i++) {
            var item = elements.item(i);
            if (item != null && item.id != null && item.id.length > 0) {
                heading = document.createElement('h6');
                heading.className = "callout";
                var id = item.id;
                heading.appendChild(createAnchor(id));
                heading.id = id;
                item.parentElement.insertBefore(heading, item);
                item.parentElement.removeChild(item);
                heading.appendChild(item);
            }
        }
    });

    function createAnchor(id) {
        var anchor = document.createElement('a');
        anchor.className = 'anchor-heading';
        anchor.href = '#' + id;
        anchor.setAttribute('aria-labelledby', id);
        var svg = document.createElement('svg');
        svg.setAttribute('viewBox', '0 0 16 16');
        svg.ariaHidden = 'true';
        var use = document.createElement('use');
        use.setAttribute('xlink:href', '#svg-link');
        use.innerHTML = '{% include icons/link.html %}';
        svg.appendChild(use);
        anchor.appendChild(svg);
        return anchor;
    };

    var methodsNeedingLinks = document.getElementsByClassName("m-link");
    for (let i = 0 ; i < methodsNeedingLinks.length ; i++) {
        var item = methodsNeedingLinks.item(i);
        if (item != null && item.id != null && item.id.length > 0) {
            header = document.createElement('h6');
            header.className = "m-link-viz";
            var id = item.id;
            header.appendChild(createAnchor(id));
            header.id = id;
            item.parentElement.insertBefore(header, item);
            item.parentElement.removeChild(item);
            header.appendChild(item);
        }
    }
</script>